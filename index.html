<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>The Space I Shape Turns</title>
  <link rel="icon" href="data:,"><!-- silence favicon 404 -->

  <!-- Fonts for cube faces + corner numbers -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:wght@400;600&family=Source+Sans+Pro:wght@400;600&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div id="hint">Drag Cube—Spin Menu.</div>
  <div id="geo" aria-hidden="true">Lat: 0.00° Lon: 0.00°</div>
  <!-- Bilinear corner weights overlay -->
  <div id="weights">
    <div class="w tl" id="w-tl">Kongsvinger –</div>
    <div class="w tr" id="w-tr">Berlin –</div>
    <div class="w bl" id="w-bl">Rio –</div>
    <div class="w br" id="w-br">Sydney –</div>
  </div>
  
    <!-- INLINE SCRIPT (menu behaviour) -->
  <script>
    (() => {
      const caption = document.getElementById('menu-caption');
      const items   = [...document.querySelectorAll('.menu-item')];

      let hoverTimer = null;
      const DELAY_IN  = 140;
      const DELAY_OUT = 90;

      function show(el){
        const word = el.textContent.trim();
        caption.textContent = `${word} — ${el.dataset.sentence}`;
        caption.style.opacity   = '1';
        caption.style.transform = 'translateX(0)';
        caption.style.filter    = 'blur(0px)';
      }
      function hide(){
        caption.style.opacity   = '0';
        caption.style.transform = 'translateX(-8px)';
        caption.style.filter    = 'blur(2px)';
      }

      items.forEach(btn => {
        btn.addEventListener('mouseenter', () => {
          clearTimeout(hoverTimer);
          hoverTimer = setTimeout(() => show(btn), DELAY_IN);
        });
        btn.addEventListener('mouseleave', () => {
          clearTimeout(hoverTimer);
          hoverTimer = setTimeout(hide, DELAY_OUT);
        });
        btn.addEventListener('focus', () => show(btn));
        btn.addEventListener('blur', hide);

        // Touch support
        btn.addEventListener('touchend', (e) => {
          e.preventDefault();
          if (caption.style.opacity === '1' && caption.textContent.startsWith(btn.textContent.trim())) {
            hide();
          } else {
            show(btn);
          }
        });
      });
    })();
  </script>
  
  <canvas id="stars" aria-hidden="true"></canvas>
  <canvas id="scene" aria-label="Interactive 3D box"></canvas>

  <!-- Load the starfield first, then your cube -->
  <script type="module" src="./starfield.js?v=1"></script>
<script type="module" src="./cube.js?v=15"></script>
</body>
</html>
